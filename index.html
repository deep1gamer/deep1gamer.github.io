<!DOCTYPE html>
<html>
<head>
    <title>ServCoin Ads</title>
    <script src="https://cdn.monetag.com/tag.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background: #2c3e50;
            color: white;
        }
        #ad-container {
            margin: 20px auto;
            width: 300px;
            height: 250px;
            background: #34495e;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        button {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
        .counter {
            font-size: 18px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h2>🪙 Earn ServCoins</h2>
    <p>Watch ads to get coins for your Minecraft server</p>
    
    <div id="ad-container">
        <p>Click Start to begin</p>
    </div>
    
    <div class="counter">
        Ads completed: <span id="counter">0</span>/10
    </div>
    
    <button id="start-btn">Start Ads</button>
    <button id="close-btn" style="background:#e74c3c">Done</button>

    <script>
        let adsCompleted = 0;
        const userId = "WEBVIEW_USER"; // Will be replaced by Python
        
        document.getElementById("start-btn").addEventListener("click", () => {
            startAd();
        });
        
        document.getElementById("close-btn").addEventListener("click", () => {
            window.pywebview.api.close(adsCompleted * 5); // 5 coins per ad
        });

        function startAd() {
            if(adsCompleted >= 10) return;
            
            monetag.startAd({
                containerId: "ad-container",
                publisherId: "YOUR_PUBLISHER_ID", // ← Replace this
                zoneId: "YOUR_ZONE_ID",           // ← Replace this
                onStart: () => {
                    document.getElementById("ad-container").innerHTML = 
                        "<p>Loading ad...</p>";
                },
                onComplete: () => {
                    adsCompleted++;
                    document.getElementById("counter").textContent = adsCompleted;
                    
                    // Report completion to Python
                    window.pywebview.api.ad_completed(adsCompleted);
                    
                    // Auto-load next ad after 2 seconds
                    if(adsCompleted < 10) {
                        setTimeout(startAd, 2000);
                    }
                }
            });
        }
    </script>
</body>
</html>
