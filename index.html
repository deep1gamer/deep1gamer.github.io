<!DOCTYPE html>
<html>
<head>
    <title>Earn ServCoins</title>
    <script src="https://cdn.monetag.com/tag.js"></script>
    <style>
        #monetag-ad { width: 300px; height: 250px; margin: 20px auto; }
        .ad-container { text-align: center; padding: 20px; }
    </style>
</head>
<body>
    <div class="ad-container">
        <h2>Watch Ads to Earn ServCoins</h2>
        <div id="monetag-ad"></div>
        <p id="status">Click 'Start' to begin watching ads</p>
        <button onclick="initAds()">Start Watching Ads</button>
    </div>

    <script>
        let adsWatched = 0;
        const userId = "USER123"; // Replace with actual user ID from your system

        function initAds() {
            document.getElementById('status').textContent = "Loading ads...";
            
            monetag.startAd({
                containerId: "monetag-ad",
                publisherId: "YOUR_MONETAG_PUBLISHER_ID",
                onStart: function() {
                    document.getElementById('status').textContent = "Ad started - please watch";
                },
                onComplete: function() {
                    adsWatched++;
                    logAdCompletion(userId);
                    document.getElementById('status').textContent = 
                        `Ad ${adsWatched}/10 completed! ${10-adsWatched} remaining`;
                    
                    if(adsWatched < 10) {
                        setTimeout(initAds, 1500); // Load next ad after delay
                    } else {
                        document.getElementById('status').textContent = 
                            "Complete! 20 ServCoins earned!";
                        awardCoins(userId, 20);
                    }
                }
            });
        }

        function logAdCompletion(userId) {
            // Send to your tracking API
            fetch('https://your-api.com/log_ad', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    user_id: userId,
                    ad_count: adsWatched,
                    coins: 2 // 2 coins per ad
                })
            });
        }

        function awardCoins(userId, amount) {
            // Connect to Minecraft Server Manager
            fetch('https://your-minecraft-app.com/api/add_coins', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    user_id: userId,
                    coins: amount,
                    source: "monetag_ads"
                })
            });
        }
    </script>
</body>
</html>
